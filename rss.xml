<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Loris Cro's Personal Blog]]></title><description><![CDATA[A blog about computer science and design.]]></description><link>https://kristoff.it/</link><generator>RSS for Node</generator><lastBuildDate>Mon, 05 Aug 2019 18:07:12 GMT</lastBuildDate><item><title><![CDATA[What is Zig's Comptime?]]></title><description><![CDATA[If you’ve only experienced compile-time execution in the form of macros, generics or codegen, be ready to be surprised by what Zig can do…]]></description><link>https://kristoff.it//blog/what-is-zig-comptime/</link><guid isPermaLink="false">https://kristoff.it//blog/what-is-zig-comptime/</guid><pubDate>Sun, 04 Aug 2019 22:00:00 GMT</pubDate><content:encoded>&lt;p&gt;If you’ve only experienced compile-time execution in the form of macros, generics or codegen, be ready to be surprised by what Zig can do.&lt;/p&gt;
&lt;h2 id=&quot;what-is-zig&quot;&gt;&lt;a href=&quot;#what-is-zig&quot; aria-label=&quot;what is zig permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;What is Zig&lt;/h2&gt;
&lt;p&gt;Zig is a new general-purpose programming language developed by Andrew Kelley. While still under heavy development, I think the language is already showing great promise. Zig aims to be a better C, similarly to how Rust can be understood as a better C++, generally speaking. Zig has no garbage collection, no built-in event loops, nor other runtime machinery of that level. It’s lean just like C, and in fact it can interoperate with C pretty easily. For a complete overview checkout &lt;a href=&quot;https://ziglang.org&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://ziglang.org&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;Now that you got a general idea about the level of abstraction in which Zig operates, you won’t be surprised to know that there is absolutely no support for reflection at runtime; but what you can’t do a runtime, you can certainly do at compile-time.&lt;/p&gt;
&lt;h2 id=&quot;running-code-at-compile-time&quot;&gt;&lt;a href=&quot;#running-code-at-compile-time&quot; aria-label=&quot;running code at compile time permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Running code at compile-time&lt;/h2&gt;
&lt;p&gt;Let’s start with the basics: using the &lt;code&gt;comptime&lt;/code&gt; keyword to run arbitrary code at compilation-time.&lt;/p&gt;
&lt;h4 id=&quot;compile-time-function-calls&quot;&gt;&lt;a href=&quot;#compile-time-function-calls&quot; aria-label=&quot;compile time function calls permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Compile-time function calls&lt;/h4&gt;
&lt;p&gt;The following code uses a function to decide the length of a statically-allocated array.&lt;/p&gt;
&lt;div class=&quot;vscode-highlight-wrapper&quot;&gt;&lt;pre class=&quot;dark-default-dark vscode-highlight&quot; data-language=&quot;zig&quot;&gt;&lt;code class=&quot;vscode-highlight-code&quot;&gt;&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; multiply(a: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;i64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, b: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;i64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;i64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; a * b;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;pub&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; main() &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; len = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;comptime&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; multiply(&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; my_static_array: [len]&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note how the function definition doesn’t have any attribute that states it must be available at compile-time. It’s just a normal function, and we request its compile-time execution at the call site.&lt;/p&gt;
&lt;h4 id=&quot;compile-time-blocks&quot;&gt;&lt;a href=&quot;#compile-time-blocks&quot; aria-label=&quot;compile time blocks permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Compile-time blocks&lt;/h4&gt;
&lt;p&gt;You can also use &lt;code&gt;comptime&lt;/code&gt; to define a compile-time block inside a function. The following example is a case-insensitive string compare function that is optimized for the use-case where one of the two strings is hardcoded. Compile-time execution ensures that the function doesn’t get misused.&lt;/p&gt;
&lt;div class=&quot;vscode-highlight-wrapper&quot;&gt;&lt;pre class=&quot;dark-default-dark vscode-highlight&quot; data-language=&quot;zig&quot;&gt;&lt;code class=&quot;vscode-highlight-code&quot;&gt;&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// Compares two strings ignoring case (ascii strings only).&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// Specialzied version where &amp;#96;uppr&amp;#96; is comptime known and *uppercase*.&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; insensitive_eql(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;comptime&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; uppr: []&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, str: []&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;comptime&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; i = &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (i &amp;lt; uppr.len) : (i += &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (uppr[i] &amp;gt;= &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;#39;a&amp;#39;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;and&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; uppr[i] &amp;lt;= &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;#39;z&amp;#39;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@compileError&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;&amp;#96;uppr&amp;#96; must be all uppercase&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;            }&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        }&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    }&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; i = &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (i &amp;lt; uppr.len) : (i += &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; val = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (str[i] &amp;gt;= &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;#39;a&amp;#39;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;and&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; str[i] &amp;lt;= &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;#39;z&amp;#39;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;            str[i] - &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;32&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;else&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;            str[i];&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (val != uppr[i]) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    }&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;pub&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; main() &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; x = insensitive_eql(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;Hello&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;hElLo&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Compilation of this program fails and produces the following output.&lt;/p&gt;
&lt;div class=&quot;vscode-highlight-wrapper&quot;&gt;
&lt;pre class=&quot;dark-default-dark vscode-highlight&quot; data-language=&quot;shell&quot;&gt;
&lt;code class=&quot;vscode-highlight-code vscode-highlight-line&quot;&gt;&lt;span class=&quot;bold&quot;&gt;&lt;span class=&quot;f2&quot;&gt;➜&lt;/span&gt;&lt;/span&gt; zig build-exe ieq.zig                                       
&lt;span class=&quot;bold&quot;&gt;/Users/loriscro/ieq.zig:8:17: &lt;span class=&quot;f1&quot;&gt;&lt;span class=&quot;bold&quot;&gt;error:&lt;/span&gt;&lt;/span&gt; `uppr` must be all uppercase&lt;/span&gt;
                @compileError(&amp;quot;`uppr` must be all uppercase&amp;quot;);
                &lt;span class=&quot;f2&quot;&gt;&lt;span class=&quot;bold&quot;&gt;^&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;bold&quot;&gt;/Users/loriscro/ieq.zig:24:30: &lt;span class=&quot;f6&quot;&gt;&lt;span class=&quot;bold&quot;&gt;note:&lt;/span&gt;&lt;/span&gt; called from here&lt;/span&gt;
    const x = insensitive_eql(&amp;quot;Hello&amp;quot;, &amp;quot;hElLo&amp;quot;);
                             &lt;span class=&quot;f2&quot;&gt;&lt;span class=&quot;bold&quot;&gt;^&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;/div&gt;
&lt;h4 id=&quot;compile-time-code-elision&quot;&gt;&lt;a href=&quot;#compile-time-code-elision&quot; aria-label=&quot;compile time code elision permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Compile-time code elision&lt;/h4&gt;
&lt;p&gt;Zig can statically resolve control flow expressions that depend on compile-time known values. For example, you can force loop unrolling on &lt;code&gt;while&lt;/code&gt; / &lt;code&gt;for&lt;/code&gt; loops and elide branches from &lt;code&gt;if&lt;/code&gt; / &lt;code&gt;switch&lt;/code&gt; statements. The following program asks the user for a number and then iteratively applies a list of operations to it:&lt;/p&gt;
&lt;div class=&quot;vscode-highlight-wrapper&quot;&gt;&lt;pre class=&quot;dark-default-dark vscode-highlight&quot; data-language=&quot;zig&quot;&gt;&lt;code class=&quot;vscode-highlight-code&quot;&gt;&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; builtin = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@import&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;builtin&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; std = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@import&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;std&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; fmt = std.fmt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; io = std.io;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; Op = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;enum&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    Sum,&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    Mul,&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    Sub,&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;};&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; ask_user() !&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;i64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; buf: [&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;undefined&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    std.debug.warn(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;A number please: &amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; user_input = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; io.readLineSlice(buf[&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;..]);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; fmt.parseInt(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;i64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, user_input, &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; apply_ops(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;comptime&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; operations: []&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; Op, num: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;i64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;i64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; acc: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;i64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;inline&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (operations) |op| {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;switch&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (op) {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;            .Sum =&amp;gt; acc +%= num,&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;            .Mul =&amp;gt; acc *%= num,&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;            .Sub =&amp;gt; acc -%= num,&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        }&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    }&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; acc;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;pub&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; main() !&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; user_num = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; ask_user();&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; ops = [&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;]Op{.Sum, .Mul, .Sub, .Sub};&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; x = apply_ops(ops[&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;..], user_num);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    std.debug.warn(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;Result: {}&lt;/span&gt;&lt;span class=&quot;mtk6&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, x);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The interesting part of this code is the &lt;code&gt;for&lt;/code&gt; loop. The &lt;code&gt;inline&lt;/code&gt; keyword forces loop unrolling, and inside the loop’s body there is a &lt;code&gt;switch&lt;/code&gt; statement that also gets resolved at compile-time. In short, the invocation of &lt;code&gt;apply_ops&lt;/code&gt; in the previous example basically resolves to:&lt;/p&gt;
&lt;div class=&quot;vscode-highlight-wrapper&quot;&gt;&lt;pre class=&quot;dark-default-dark vscode-highlight&quot; data-language=&quot;zig&quot;&gt;&lt;code class=&quot;vscode-highlight-code&quot;&gt;&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; acc: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;i64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;acc +%= num;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;acc *%= num;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;acc -%= num;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;acc -%= num;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; acc;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To test that this is really what’s happening, paste the program code in &lt;a href=&quot;https://godbolt.org&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;https://godbolt.org&lt;/a&gt;, select Zig as target language, and then select a version of Zig greater than 0.4.0 (at the moment of writing you must select “zig trunk”). Godbolt will compile the code and show you the generated assembly. Right-click on a line of code, and a contextual menu will let you jump to the assembly code that the line corresponds to. You will notice that neither the &lt;code&gt;for&lt;/code&gt; loop, nor the &lt;code&gt;switch&lt;/code&gt; correspond to any assembly. Remove the &lt;code&gt;inline&lt;/code&gt; keyword, and they will now show up.&lt;/p&gt;
&lt;h2 id=&quot;generics&quot;&gt;&lt;a href=&quot;#generics&quot; aria-label=&quot;generics permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Generics&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;comptime&lt;/code&gt; keyword indicates code regions and values that must be resolved at compile-time. In the previous examples we used it to perform something similar to template metaprogramming, but it can also be used for generic programming, since types are valid compile-time values.&lt;/p&gt;
&lt;h4 id=&quot;generic-functions&quot;&gt;&lt;a href=&quot;#generic-functions&quot; aria-label=&quot;generic functions permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Generic functions&lt;/h4&gt;
&lt;p&gt;Since generic programming is tied to &lt;code&gt;comptime&lt;/code&gt; arguments, Zig doesn’t have the &lt;em&gt;traditional&lt;/em&gt; diamond bracket syntax. Other than that, basic usage of generics is very similar to other languages. The following code is Zig’s implementation of &lt;code&gt;mem.eql&lt;/code&gt;, taken from the standard library. It’s used to test two slices for equality.&lt;/p&gt;
&lt;div class=&quot;vscode-highlight-wrapper&quot;&gt;&lt;pre class=&quot;dark-default-dark vscode-highlight&quot; data-language=&quot;zig&quot;&gt;&lt;code class=&quot;vscode-highlight-code&quot;&gt;&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;/// Compares two slices and returns whether they are equal.&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;pub&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; eql(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;comptime&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; T: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, a: []&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; T, b: []&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; T) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (a.len != b.len) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (a) |item, index| {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (b[index] != item) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    }&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As you can see, &lt;code&gt;T&lt;/code&gt; is a variable of type &lt;code&gt;type&lt;/code&gt; and the subsequent arguments use it as a generic parameter. This way it’s possible to use &lt;code&gt;mem.eql&lt;/code&gt; with any kind of slice.&lt;/p&gt;
&lt;p&gt;It’s also possible to do introspection on values of type &lt;code&gt;type&lt;/code&gt;. In a previous example we parsed an integer number from user input and requested a specific type of integer. The parsing function uses that information to elide some code from its generic implementation.&lt;/p&gt;
&lt;div class=&quot;vscode-highlight-wrapper&quot;&gt;&lt;pre class=&quot;dark-default-dark vscode-highlight&quot; data-language=&quot;zig&quot;&gt;&lt;code class=&quot;vscode-highlight-code&quot;&gt;&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// This is the line in &amp;#96;apply_ops&amp;#96; where we parsed a number&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; fmt.parseInt(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;i64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, user_input, &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// This is the stdlib implementation of &amp;#96;parseInt&amp;#96;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;pub&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; parseInt(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;comptime&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; T: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, buf: []&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, radix: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) !T {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (!T.is_signed) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; parseUnsigned(T, buf, radix);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (buf.len == &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; T(&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (buf[&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;] == &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;#39;-&amp;#39;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; math.negate(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; parseUnsigned(T, buf[&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;..], radix));&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    } &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (buf[&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;] == &lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;#39;+&amp;#39;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; parseUnsigned(T, buf[&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;..], radix);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    } &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; parseUnsigned(T, buf, radix);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    }&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;generic-structs&quot;&gt;&lt;a href=&quot;#generic-structs&quot; aria-label=&quot;generic structs permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Generic structs&lt;/h4&gt;
&lt;p&gt;Before describing how to create generic structs, here’s a brief introduction on how structs work in Zig.&lt;/p&gt;
&lt;div class=&quot;vscode-highlight-wrapper&quot;&gt;&lt;pre class=&quot;dark-default-dark vscode-highlight&quot; data-language=&quot;zig&quot;&gt;&lt;code class=&quot;vscode-highlight-code&quot;&gt;&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; std = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@import&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;std&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; math = std.math;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; assert = std.debug.assert;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// A struct definition doesn&amp;#39;t include a name.&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// Assigning the struct to a variable gives it a name.&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; Point = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    x: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;f64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    y: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;f64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    z: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;f64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;		&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk3&quot;&gt;// A struct definition can also contain namespaced functions.&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk3&quot;&gt;// This has no impact on the struct layout.&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk3&quot;&gt;// Struct functions that take a Self parameter, when&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk3&quot;&gt;// invoked through a struct instance, will automatically&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk3&quot;&gt;// fill the first argument, just like methods do.&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; Self = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@This&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;();&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;pub&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; distance(self: Self, p: Point) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;f64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; x2 = math.pow(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;f64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, self.x - p.x, &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; y2 = math.pow(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;f64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, self.y - p.y, &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; z2 = math.pow(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;f64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, self.z - p.z, &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; math.sqrt(x2 + y2 + z2);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    }&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;};&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;pub&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; main() !&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; p1 = Point{ .x = &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, .y = &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, .z = &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; };&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; p2 = Point{ .x = &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, .y = &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, .z = &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; };&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    assert(p1.distance(p2) == &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    assert(Point.distance(p1, p2) == &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We’re now ready to talk about generic structs. To create a generic struct, all you have to do is create a function that takes a type argument and use that argument in your struct definition. Here’s an example lifted from Zig’s documentation. It’s a doubly-linked intrusive list.&lt;/p&gt;
&lt;div class=&quot;vscode-highlight-wrapper&quot;&gt;&lt;pre class=&quot;dark-default-dark vscode-highlight&quot; data-language=&quot;zig&quot;&gt;&lt;code class=&quot;vscode-highlight-code&quot;&gt;&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; LinkedList(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;comptime&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; T: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;pub&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; Node = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;struct&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;            prev: ?*Node = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;            next: ?*Node = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;            data: T,&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        };&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        first: ?*Node = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        last: ?*Node = &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        len: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;usize&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;,&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    };&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The function returns a &lt;code&gt;type&lt;/code&gt;, which means it can only be called at comptime. It defines two structs:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The main &lt;code&gt;LinkedList&lt;/code&gt; struct&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;Node&lt;/code&gt; struct, namespaced inside the main struct&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Just like structs can namespace functions, they can also namespace variables. This is especially useful for introspection when creating composite types. Here’s how &lt;code&gt;LinkedList&lt;/code&gt; can be composed with our previous &lt;code&gt;Point&lt;/code&gt; struct.&lt;/p&gt;
&lt;div class=&quot;vscode-highlight-wrapper&quot;&gt;&lt;pre class=&quot;dark-default-dark vscode-highlight&quot; data-language=&quot;zig&quot;&gt;&lt;code class=&quot;vscode-highlight-code&quot;&gt;&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// To try this code, paste both definitions in the same file.&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; PointList = LinkedList(Point);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; p = Point{ .x = &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, .y = &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, .z = &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; };&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; my_list = PointList{};&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// A complete implementation would offer an &amp;#96;append&amp;#96; method.&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// For now let&amp;#39;s add the new node manually.&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; node = PointList.Node{ .data = p };&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;my_list.first = &amp;amp;node;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;my_list.last = &amp;amp;node;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;my_list.len = &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The Zig standard library contains &lt;a href=&quot;https://github.com/ziglang/zig/blob/ddf7942aaa6a41296d9338423dcdfb93b915e4df/std/linked_list.zig&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;a couple of fleshed out implementations of linked lists&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;compile-time-reflection&quot;&gt;&lt;a href=&quot;#compile-time-reflection&quot; aria-label=&quot;compile time reflection permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Compile-time reflection&lt;/h2&gt;
&lt;p&gt;Now that we have covered all the basics, we can finally move onto the things that make Zig metaprogramming truly powerful and fun to use. &lt;/p&gt;
&lt;p&gt;We already saw an example of reflection when &lt;code&gt;parseInt&lt;/code&gt; was checking &lt;code&gt;T.is_signed&lt;/code&gt;, but in this section I want to focus on a more advanced usage of reflection. I’ll introduce the concept with a code sample.&lt;/p&gt;
&lt;div class=&quot;vscode-highlight-wrapper&quot;&gt;&lt;pre class=&quot;dark-default-dark vscode-highlight&quot; data-language=&quot;zig&quot;&gt;&lt;code class=&quot;vscode-highlight-code&quot;&gt;&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; make_couple_of(x: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) [&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@typeOf&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(x) {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; [&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@typeOf&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(x) {x, x};&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This — mostly useless — function can take any value as input and creates an array that contains two copies of it. The following invocations are all correct.&lt;/p&gt;
&lt;div class=&quot;vscode-highlight-wrapper&quot;&gt;&lt;pre class=&quot;dark-default-dark vscode-highlight&quot; data-language=&quot;zig&quot;&gt;&lt;code class=&quot;vscode-highlight-code&quot;&gt;&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;make_couple_of(&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;); &lt;/span&gt;&lt;span class=&quot;mtk3&quot;&gt;// creates [2]comptime_int{5, 5}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;make_couple_of(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;i32&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)); &lt;/span&gt;&lt;span class=&quot;mtk3&quot;&gt;// creates [2]i32{5, 5}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;make_couple_of(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;); &lt;/span&gt;&lt;span class=&quot;mtk3&quot;&gt;// creates [2]type{u8, u8}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;make_couple_of(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;); &lt;/span&gt;&lt;span class=&quot;mtk3&quot;&gt;// creates [2]type{type, type}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;make_couple_of(make_couple_of(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;hi&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)); &lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// creates [2][2][2]u8{[2][2]u8{&amp;quot;hi&amp;quot;,&amp;quot;hi&amp;quot;}, [2][2]u8{&amp;quot;hi&amp;quot;,&amp;quot;hi&amp;quot;}}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Arguments of type &lt;code&gt;var&lt;/code&gt; are very powerful and allow construction of optimized and yet “dynamic” functions. For the next example I’ll lift some more code from the standard library to showcase a more useful use of this functionality.&lt;/p&gt;
&lt;p&gt;The following code is the implementation of &lt;code&gt;math.sqrt&lt;/code&gt;, which we used in a previous example to compute the euclidean distance between two points.&lt;/p&gt;
&lt;div class=&quot;vscode-highlight-wrapper&quot;&gt;&lt;pre class=&quot;dark-default-dark vscode-highlight&quot; data-language=&quot;zig&quot;&gt;&lt;code class=&quot;vscode-highlight-code&quot;&gt;&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// I moved part of the original definition to&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk3&quot;&gt;// a separate function for better readability.&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; decide_return_type(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;comptime&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; T: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@typeId&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(T) == TypeId.Int) {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@IntType&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, T.bit_count / &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    } &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; T;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    }&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line vscode-highlight-line-highlighted&quot;&gt;&lt;span class=&quot;mtk4&quot;&gt;pub&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; sqrt(x: &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) decide_return_type(&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@typeOf&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(x)) {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; T = &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@typeOf&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(x);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;switch&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@typeId&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(T)) {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        TypeId.ComptimeFloat =&amp;gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; T(&lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@sqrt&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;f64&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, x)),&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        TypeId.Float =&amp;gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@sqrt&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(T, x),&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        TypeId.ComptimeInt =&amp;gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;comptime&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (x &amp;gt; maxInt(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;u128&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;)) {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@compileError&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;                	&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;sqrt not implemented for &amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; ++ &lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;                	&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;comptime_int greater than 128 bits&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;            }&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; (x &amp;lt; &lt;/span&gt;&lt;span class=&quot;mtk7&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;) {&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;                &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@compileError&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;sqrt on negative number&amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;);&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;            }&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;            &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; T(sqrt_int(&lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;u128&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;, x));&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        },&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        TypeId.Int =&amp;gt; &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; sqrt_int(T, x),&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;        &lt;/span&gt;&lt;span class=&quot;mtk4&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; =&amp;gt; &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@compileError&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mtk8&quot;&gt;&amp;quot;not implemented for &amp;quot;&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt; ++ &lt;/span&gt;&lt;span class=&quot;mtk11&quot;&gt;@typeName&lt;/span&gt;&lt;span class=&quot;mtk1&quot;&gt;(T)),&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;    }&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;vscode-highlight-line&quot;&gt;&lt;span class=&quot;mtk1&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The return type of this function is a bit peculiar. If you look at the signature of &lt;code&gt;sqrt&lt;/code&gt;, it’s calling a function in the place where it should be declaring the return type. This is allowed in Zig. The original code actually inlines an &lt;code&gt;if&lt;/code&gt; expression, but I moved it to a separate function for better readability. &lt;/p&gt;
&lt;p&gt;So what is &lt;code&gt;sqrt&lt;/code&gt; trying to do with its return type? It’s applying a small optimization when we’re passing in an integer value. In that case the function declares its return type as an &lt;strong&gt;unsigned&lt;/strong&gt; integer with &lt;strong&gt;half the bit size&lt;/strong&gt; of the original input. This means that, if we’re passing in an &lt;code&gt;i64&lt;/code&gt; value, the function will return an &lt;code&gt;u32&lt;/code&gt; value. This makes sense given what the square root function does. The rest of the declaration then uses reflection to further specialize and report compile-time errors where appropriate.&lt;/p&gt;
&lt;h2 id=&quot;in-conclusion&quot;&gt;&lt;a href=&quot;#in-conclusion&quot; aria-label=&quot;in conclusion permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;In conclusion&lt;/h2&gt;
&lt;p&gt;Compile-time execution is great, especially when the language is very expressive. Without good compile-time metaprogramming, one must resort to macros or codegen, or worse, do a lot of useless work at runtime. &lt;/p&gt;
&lt;p&gt;If you want to see one more cool example of what can be done at compile-time in Zig, &lt;a href=&quot;https://andrewkelley.me/post/string-matching-comptime-perfect-hashing-zig.html&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener noreferrer&quot;&gt;take a look at this blog post by Andrew himself&lt;/a&gt;. In it, he uses some the aforementioned techniques to generate a perfect hashing function for a compile-time known list of strings. The result is that the user can create a switch that matches strings in &lt;code&gt;O(1)&lt;/code&gt;. The code is very easy to understand, and he offers some insight on how all the other minor features make user abstractions easy, fun and safe to use.&lt;/p&gt;
&lt;style class=&quot;vscode-highlight-styles&quot;&gt;:root {
  --vscode-highlight-padding-v: 1rem;
  --vscode-highlight-padding-h: 1.5rem;
  --vscode-highlight-padding-top: var(--vscode-highlight-padding-v);
  --vscode-highlight-padding-right: var(--vscode-highlight-padding-h);
  --vscode-highlight-padding-bottom: var(--vscode-highlight-padding-v);
  --vscode-highlight-padding-left: var(--vscode-highlight-padding-h);
  --vscode-highlight-border-radius: 8px;

  --vscode-highlight-line-highlighted-background-color: transparent;
  --vscode-highlight-line-highlighted-border-width: 4px;
  --vscode-highlight-line-highlighted-border-color: transparent;
}

.vscode-highlight {
  overflow: auto;
  -webkit-overflow-scrolling: touch;
  padding-top: 1rem;
  padding-top: var(--vscode-highlight-padding-top);
  padding-bottom: 1rem;
  padding-bottom: var(--vscode-highlight-padding-bottom);
  border-radius: 8px;
  border-radius: var(--vscode-highlight-border-radius);
  font-feature-settings: normal;
}

.vscode-highlight-code {
  display: inline-block;
  min-width: 100%;
}

.vscode-highlight-line {
  display: inline-block;
  box-sizing: border-box;
  width: 100%;
  padding-left: 1.5rem;
  padding-left: var(--vscode-highlight-padding-left);
  padding-right: 1.5rem;
  padding-right: var(--vscode-highlight-padding-right);
}

.vscode-highlight-line-highlighted {
  background-color: var(--vscode-highlight-line-highlighted-background-color);
  box-shadow: inset var(--vscode-highlight-line-highlighted-border-width) 0 0 0 var(--vscode-highlight-line-highlighted-border-color);
}
.dark-default-dark {
background-color: #1E1E1E;
color: #D4D4D4;
}

.dark-default-dark .mtk1 { color: #D4D4D4; }
.dark-default-dark .mtk2 { color: #1E1E1E; }
.dark-default-dark .mtk3 { color: #6A9955; }
.dark-default-dark .mtk4 { color: #569CD6; }
.dark-default-dark .mtk5 { color: #D16969; }
.dark-default-dark .mtk6 { color: #D7BA7D; }
.dark-default-dark .mtk7 { color: #B5CEA8; }
.dark-default-dark .mtk8 { color: #CE9178; }
.dark-default-dark .mtk9 { color: #646695; }
.dark-default-dark .mtk10 { color: #4EC9B0; }
.dark-default-dark .mtk11 { color: #DCDCAA; }
.dark-default-dark .mtk12 { color: #9CDCFE; }
.dark-default-dark .mtk13 { color: #000080; }
.dark-default-dark .mtk14 { color: #F44747; }
.dark-default-dark .mtk15 { color: #C586C0; }
.dark-default-dark .mtk16 { color: #6796E6; }
.dark-default-dark .mtk17 { color: #808080; }
.dark-default-dark .mtki { font-style: italic; }
.dark-default-dark .mtkb { font-weight: bold; }
.dark-default-dark .mtku { text-decoration: underline; text-underline-position: under; }&lt;/style&gt;</content:encoded></item><item><title><![CDATA[I Want Simple, Not Just Easy]]></title><description><![CDATA[Simple → Complex is the dimension that describes how irregular and interconnected a system is. Simple systems can be broken down into…]]></description><link>https://kristoff.it//blog/simple-not-just-easy/</link><guid isPermaLink="false">https://kristoff.it//blog/simple-not-just-easy/</guid><pubDate>Sat, 20 Jul 2019 22:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span style=&quot;text-align:left; display:inline-block;&quot;&gt;&lt;b&gt;Simple → Complex&lt;/b&gt;&lt;/span&gt; is the dimension that describes how irregular and interconnected a system is. Simple systems can be broken down into smaller pieces that are understandable in isolation. If you make changes to one of those pieces, you don’t have to fear unexpected ramifications in parts not directly connected to what you’re operating on. Complex systems are the exact opposite: you’ll need to keep in mind a lot of things and tread carefully.&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;text-align:left; display:inline-block;&quot;&gt;&lt;b&gt;Easy → Hard&lt;/b&gt;&lt;/span&gt; is the dimension of how much energy and time it takes to successfully execute something. Easy things generally require less preparation and can be done reliably even by inexperienced individuals. By definition, hard stuff requires more effort and not everybody gets it right all the time.&lt;/p&gt;
&lt;p&gt;It goes without saying that complex things tend to be hard, while simple things tend to be easy, but that’s not always the case. Software engineering can shift this balance almost alchemically, although not always for the best.&lt;/p&gt;
&lt;h2 id=&quot;building-abstractions&quot;&gt;&lt;a href=&quot;#building-abstractions&quot; aria-label=&quot;building abstractions permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Building abstractions&lt;/h2&gt;
&lt;p&gt;Every time you build an abstraction, you encapsulate a given amount of complexity, making it easier to use. When you print to a terminal, you’re probably doing it in a single line of code: that’s an abstraction over a whole lot of subsystems that you might not even know about. It’s easier to print that way, but the complexity is still there, hidden behind a single function call.&lt;/p&gt;
&lt;h4 id=&quot;so-whats-the-point-of-abstracting&quot;&gt;&lt;a href=&quot;#so-whats-the-point-of-abstracting&quot; aria-label=&quot;so whats the point of abstracting permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;So what’s the point of abstracting?&lt;/h4&gt;
&lt;p&gt;While in the previous example abstracting did not decrease complexity, it did draw a box around a subsystem. If you remember, simple systems are made up of smaller boxes, so &lt;strong&gt;abstraction is a step towards composing bigger systems without increasing complexity too much&lt;/strong&gt;. It’s also good that it made things easier: if it took 100 lines of code to print something to a terminal, we would be years behind compared to where we are today, just because of all the economic implications.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;This is why we don’t write everything in assembly&lt;/strong&gt;. It’s easier (more economical) to write in higher-level languages, and function calls, for loops and other flow control structures proved to be good abstractions over machine-level operations. Keep in mind: none of these things &lt;em&gt;further&lt;/em&gt; simplifies assembly code, but they do actively &lt;em&gt;prevent&lt;/em&gt; it from exploding in terms of complexity, as it would &lt;em&gt;easily&lt;/em&gt; do without small boxes such as functions, etc.&lt;/p&gt;
&lt;p&gt;&lt;figure class=&quot;gatsby-resp-image-figure&quot; style=&quot;&quot;&gt;
    &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 400px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/91fec12ab8620aee3b60e6756bda6994/26532/webassembly.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 130.8300395256917%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsSAAALEgHS3X78AAAE0klEQVRIx6VVa0xURxTmV5Oavm1LKaatWisVoVoJWKWBAJYEKQRKlUpFsLx8ADUhQUwtUGyIGhNqbAPEGOM/AqyPBWoqRjBAw0OgJbzkJcTq3jt3d8GFXZZl9+uZ2Yfrav3TSU7mcc98853vnDvjpZ2bw6ORUehUV6FTN0GvboT2qhoPa+shq65AU6eCfPkqGJmm/jLNL+N+TS3Nr5FvE3QNZOQ3+9ffWFhagpfRaIRns5A90GoxNjODvqEhDE1OYphs4O5dDE9NYUaSsIhnN6+F+XkxsD3j48PZWfyj0+HBrB73dVpIhkdgDn/PPXxss9qIIdFcHp+EkUIzcaPQTRSWkUK0UOjL1xpgcRrNl6g3Ueim+ivke0X4G2vqYB4csjPkARsrzkF6zQcs+kuwDZ9C3hoO5YOPwbZHQFr/CeT310Py2wxp82dizPw2ga3dCLaafDZugfSKNww/lLgB/loFtmodlH2ZYLv2QtqTDm34F1D2pEFOzQCL/QpScirkb/dDeyAfcuZByNw3LQvKdwcg00GG4jI3wHOVkH0/hLIzEUpkjL0nJxa0HcqmrWCBwWBbaLw9EuzrFChRO8HWBYDxKNb6Q375bRjKyj0YvvcRnXYQjFix9Gxo43aBJaWA5eRCzs6FhtbY/hywb/ZBOfQ9HRYKxWc1lDUbwF56C4afT7oB/vIbJK8Xwegk9jppuXIV2Jtkb/g6+nft/Upf8U32WQOZ+736jliXvV6A4XjpY0DT739Al7wXc1mHoEvPgj4t02FZ0FGvc/R8riVNuel5FHwt4wC0JMM8ZdpehwsLrmI2LJnt9URmdZjNzSwexQ+P7zYb1eG8o1CZLOPPjg67M9Xm44q1wbq87FqbvncPP5WW4sfjx9HR1m53sVqF3xMMOXBra6sLx2w2Q9JosExgzqYoClJSUvB5aChyDx9GWVkZlsgPDnYC0MmQOzc3N4txbW0tzpw5g/HxcXR1deH69es4ffo0YmJiEBgYiNjYWAF88eJF4c8PfQqwr68PPT09uHnzJgICAnDjxg10d3djYGAA/f392LZtm7AdO3YgOjpaHDBFF4V7e0JDzvDChQvYvXu3YFBTUwN/f3+EhISgqqpKMIqKikJeXh6Sk5OFPJN0A7W1tYExhjm6Bp/Q0NmOHTsmQC9dugQ/Pz94e3tjxYoVog8PD0dGRgZSU1MFw5GRETQ0NKC9vR3Oa9AFaHaIe/78eRw9elToGRYWhqCgIMEqODgY8fHxAiwxMREVFRW4desWOjs7RXSukN0ZaiirR44cQV1dnfiYlJSEkyftvxRPUnZ2NkpKSpCQkIAOKrHR0VFhzkqwUvkIQC3dzoODgzh79iyKi4tRX1+PyspKREZGIicnB2q1WugYFxcnNCsvL0d1dbVgyLVsaWmBSqUSYXtxuk1NTTh16hQKCwsFk6KiIqEVZxIRESHC5uDcuMacaX5+PgoKCsSeEydOoLGxEYuLi08nhWvJM8/X+WEz9K4MDw+jt7cXt2/fxp07d0QyuDyz9ERYLBaPN8UD8P80kRQeN6fKJAa9Xi9ONZlMLpHdjYvvTICOHq+xsTFMT09jYmJC1KJgKMBo0tPVjS4qAZ41J2vn7+TOwNlzKYboieWgvOfAzw2Zb3qe/deefwGF8JgeliKzEAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;O&amp;#39;REILLY Web Development With Assembly - You might as well just kill yourself right now&quot;
        title=&quot;This joke lost some of its punch in the wake of WebAssembly&quot;
        src=&quot;/static/91fec12ab8620aee3b60e6756bda6994/c7805/webassembly.png&quot;
        srcset=&quot;/static/91fec12ab8620aee3b60e6756bda6994/c0399/webassembly.png 100w,
/static/91fec12ab8620aee3b60e6756bda6994/9ec3c/webassembly.png 200w,
/static/91fec12ab8620aee3b60e6756bda6994/c7805/webassembly.png 400w,
/static/91fec12ab8620aee3b60e6756bda6994/26532/webassembly.png 506w&quot;
        sizes=&quot;(max-width: 400px) 100vw, 400px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
    &lt;figcaption class=&quot;gatsby-resp-image-figcaption&quot;&gt;This joke lost some of its punch in the wake of WebAssembly&lt;/figcaption&gt;
  &lt;/figure&gt;&lt;/p&gt;
&lt;h4 id=&quot;not-all-abstraction-manages-complexity&quot;&gt;&lt;a href=&quot;#not-all-abstraction-manages-complexity&quot; aria-label=&quot;not all abstraction manages complexity permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Not all abstraction manages complexity&lt;/h4&gt;
&lt;p&gt;Abstraction is sometimes introduced just to make things easier. An example would be when you’re introducing a new interface with the sole goal of making it easier to swap in and out a replacement for a component. It will take you less effort to make that specific change (fewer references to update), but the box that you just drew is a second layer around a pre-existing block (the concrete class). Think for example about  &lt;strong&gt;Database&lt;/strong&gt; &lt;sup&gt;(class)&lt;/sup&gt; and &lt;strong&gt;IDatabase&lt;/strong&gt; &lt;sup&gt;(interface)&lt;/sup&gt;. That interface is only useful for swapping in a new database. If it were a way of abstracting what the class does, it would have had a different name to begin with. &lt;/p&gt;
&lt;h4 id=&quot;easy-is-better-than-hard&quot;&gt;&lt;a href=&quot;#easy-is-better-than-hard&quot; aria-label=&quot;easy is better than hard permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Easy is better than hard&lt;/h4&gt;
&lt;p&gt;All else being equal, there is no reason to prefer hard over easy. Stealing a quote from Economics, we have an infinite amount of things we could learn or build, and an ever limited amount of time and energy to do it. The cheaper we can do it for, the more we can have, and the benefits compound over time. It’s a bit of a trivial statement, but I want to make it clear before diving into the real issue.&lt;/p&gt;
&lt;h4 id=&quot;the-rules-of-abstraction&quot;&gt;&lt;a href=&quot;#the-rules-of-abstraction&quot; aria-label=&quot;the rules of abstraction permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The rules of abstraction&lt;/h4&gt;
&lt;p&gt;As I mentioned before, introducing abstraction has two main effects:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Lowers difficulty by hiding some of the details. Fewer lines to write, fewer things to keep in mind and think about — or even to right out know.&lt;/li&gt;
&lt;li&gt;Identifies a cohesive subsystem and draws a box around it. The box becomes then a tool that can be reused to build bigger systems, while keeping complexity down.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The second point, complexity management, is not trivial. It’s easier to lower difficulty rather than constrain complexity, and that’s often what happens when development is blind to this concept: &lt;strong&gt;easy software that encapsulates more complexity than it should&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id=&quot;easy-complexity&quot;&gt;&lt;a href=&quot;#easy-complexity&quot; aria-label=&quot;easy complexity permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Easy complexity&lt;/h2&gt;
&lt;p&gt;Easy complexity shows up in many places, causing all kinds of problems. We even have a friendly name for some incarnations of easy complexity: bloat. Saying that something is bloated is sometimes taken as a generic complaint against a misunderstood technology, and certainly the term gets abused, but it’s nevertheless a legitimate way of describing something that fails to manage complexity in a misguided effort to make things easy.&lt;/p&gt;
&lt;h4 id=&quot;using-bloated-tools&quot;&gt;&lt;a href=&quot;#using-bloated-tools&quot; aria-label=&quot;using bloated tools permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Using bloated tools&lt;/h4&gt;
&lt;p&gt;The universal property of bloated tools is being resource-hungry and needlessly slow. In the beginning, this seems almost innocuous, but as time goes on you will find that a significant percentage of human and system time gets wasted on waiting for them to perform even trivial operations. When something breaks or behaves strangely, there is no way of knowing what exactly went wrong and why. Developers that over-rely on this type of tool get progressively caught in a form of lock-in where the tool removes them from the details of what they are doing &lt;em&gt;(“the tool does it for me”)&lt;/em&gt;, making them more productive, but at an unfair price. The lock-in is not just in terms of technology: when you only &lt;em&gt;approximately&lt;/em&gt; know one way of doing things, you will also be limited in the range of things you can do, because every small deviation from the tool-sanctioned way will become a serious obstacle. &lt;/p&gt;
&lt;p&gt;The self-preserving structure of these problems is nothing short of amazing. Maybe in the beginning the developer tried to investigate root causes and different ways of doing things, but failure after failure, it’s reasonable of them — although ultimately wrong — to conclude that this approach is just a waste of time. At that point some decide that the right solution is to double down on learning how to cope with the tool’s quirks and intricacies, which will result in even more wasted time once a new shiny tool comes along.&lt;/p&gt;
&lt;p&gt;Of all the forces at play in software engineering, this is one of the strongest forms of natural selection: choosing slow and unreliable tools will make you a slow, unreliable developer with a limited and quickly depreciating skill set. It’s harsh, I know, but true. Choosing better tools won’t make you necessarily a good developer, but when you can understand what you’re doing, troubleshoot problems, and in general be able to iterate quickly, then you will have a real opportunity for improvement.&lt;/p&gt;
&lt;h4 id=&quot;not-all-bloat-is-evil&quot;&gt;&lt;a href=&quot;#not-all-bloat-is-evil&quot; aria-label=&quot;not all bloat is evil permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Not all bloat is evil&lt;/h4&gt;
&lt;p&gt;I’m purposely avoiding naming names, but I’d like to give a positive shoutout to JavaScript. We all equate JS with bloat, but in my opinion what happens there is mostly the natural result of a healthy ecosystem where many different (although sometimes half-baked) abstractions compete against each other. This still has the negative effect of making it harder to make sense of things, and causes some developers to experience burnout, but the number of broken developers (as per description above) that the JS ecosystem creates is not proportional to our perception of its bloat-ness. &lt;strong&gt;I think the biggest number of that type of developers comes from different ecosystems where bloat is the result of &lt;em&gt;hostile design&lt;/em&gt;&lt;/strong&gt;, but that’s a story for another blog post.&lt;/p&gt;
&lt;h2 id=&quot;in-conclusion&quot;&gt;&lt;a href=&quot;#in-conclusion&quot; aria-label=&quot;in conclusion permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;In Conclusion&lt;/h2&gt;
&lt;p&gt;Using bloated toolchains will have negative effects on both your productivity and personal growth. Slowness alone is a problem, but when combined with unreliability, it becomes devastating. Think about this the next time you see somebody open their IDE, wait for it to load, make a change, and then have to wait before the red underline caused by their changes disappears, plus the occasional crash. A reliable environment is a fundamental prerequisite for building competence.   The second most important prerequisite is a feedback loop that allows you to quickly gauge the result of your actions. The tighter the feedback loop, the better. When it takes minutes to build a project and run a fistful of tests, the loop is definitely not as tight as it should be.&lt;/p&gt;
&lt;p&gt;Using bloated frameworks will prevent you from understanding the details of what you’re doing and cause your software to inherit bad traits such as slowness and unreliability, further spreading the effects of easy complexity. New approaches will inevitably come, and if you never built an appreciation for the different trade-offs, all change will seem useless and arbitrary. &lt;/p&gt;
&lt;h4 id=&quot;the-economy-of-complexity&quot;&gt;&lt;a href=&quot;#the-economy-of-complexity&quot; aria-label=&quot;the economy of complexity permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;The economy of complexity&lt;/h4&gt;
&lt;p&gt;If you search “word vs latex” in google images, you will find a few pictures similar to the following:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 400px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0ef50e25277adaa3310549fc6eb846b7/02744/miktex.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 78.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAABhElEQVQoz4WS6ZKCQAyE5/3fzqI8UFkovBU55JKVYz8mK84qVds/poaQTjqdUU3TtG37eDy+DVRVVdf15XL50thut8fj8Xq9EjTTlO/7aZqGYZhlWapxe4J7EASn04lLkiQSEZAcx7Gaz+d85HnedR0Sur+gPNK6MSBWLZdL2hZFIaGyLJEnnRGP8k+y9OjJ6/WavIF8Pp8nkwlDoohpkT3KBPRQm83GdV34n7Lp/DaOXO73u3ikKIByph/+tRpcYKLNLIfbiYYsqJd9OBwo89aZPDPIySc02r4MQzM7NGXLSSrmccEw1oE0duY4Ds1msxkR0pTneVjKh9mZqpCZOdbAzmHaSuNXtriFHlbKP06yqSiWkPG5/JdsdkNhVsIpT4qT2uZuRvk9eTqd0gFjmY3Ow8L/RU+2LAsmr0LeGfxSo3iCO1rkYoKgogA90QmNaUVFpoG9bHG/32Mvb4kc2dZQSw3zYNViscA/XqVt2wy/2+14P8zFhrAQd1arFUH+RlEE5Qcu8pfw4NOMVQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Comparing Word and Latex. Image by Marko Pinteric.&quot;
        title=&quot;Comparing Word and Latex. Image by Marko Pinteric.&quot;
        src=&quot;/static/0ef50e25277adaa3310549fc6eb846b7/c7805/miktex.png&quot;
        srcset=&quot;/static/0ef50e25277adaa3310549fc6eb846b7/c0399/miktex.png 100w,
/static/0ef50e25277adaa3310549fc6eb846b7/9ec3c/miktex.png 200w,
/static/0ef50e25277adaa3310549fc6eb846b7/c7805/miktex.png 400w,
/static/0ef50e25277adaa3310549fc6eb846b7/02744/miktex.png 560w&quot;
        sizes=&quot;(max-width: 400px) 100vw, 400px&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;This picture is trying to convey that, while Microsoft Word is easier to use than LaTeX, as document size increases, you will quickly get to a point where it actually becomes easier to use LaTeX, despite the inverse being true initially. Complexity makes things hard and Word fails at containing it, causing difficulty to skyrocket. This is why you can’t ignore complexity. &lt;strong&gt;It doesn’t matter how easy you try to make things: complexity is an almost &lt;em&gt;radioactive&lt;/em&gt; source of difficulty&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;In terms of value over time, if your daily job involves working on big and complex documents, learning LaTeX is going to pay off immensely compared to sticking with Word. More importantly, learning the idea of giving semantic structure to documents is going to pay off more than learning that one arcane procedure required to drag &amp;#x26; drop pictures without messing up the layout in Word. Once you begin appreciating the relationship between structure and semantic meaning, you won’t feel bad when something new comes along and starts replacing LaTeX, because the fundamental principles will transfer to the new tool, while the image placement incantation for Word is probably going to stop working in the subsequent release, leaving  you with nothing.&lt;/p&gt;
&lt;p&gt;I leave it to you to decide if and how that picture translates into toolchains, frameworks, and even the software you write yourself, but there is an old saying that I think is still as valid as ever. I don’t remember the precise quote, but it’s something along the lines of:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;The value of a maker is reflected in the quality of their tools.&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;small&gt;&lt;em&gt;Thanks for reading my first blog post!&lt;br&gt;
My next post will probably be about a new programming language called Zig and some considerations that popped into my mind when using it, but I’m not done complaining about complexity yet. Not all easy complexity is bloat, some takes a different form that definitely deserves a dedicated post, and I didn’t touch on the subject of what it takes to actively simplify a system. And there’s also the hostile design thing…&lt;/em&gt; &lt;/small&gt;&lt;/p&gt;</content:encoded></item></channel></rss>